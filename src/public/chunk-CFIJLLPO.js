import{b as $,d as q,e as B,g as P,h as H,i as U,j as K,k as Q,l as W,m as X,o as Y}from"./chunk-I6XBKDLU.js";import{a as Z}from"./chunk-GWKCPGHY.js";import{a as J,b as M}from"./chunk-GGR2BKX4.js";import{j as k,l as F,m as z,p as T}from"./chunk-2ZPRNPF4.js";import{$ as C,$a as E,Db as I,Eb as R,Fb as G,Pa as m,Y as u,bb as x,d,e as p,eb as t,f as S,fb as e,fc as O,gb as w,gc as j,ja as D,ka as L,kb as V,lb as A,mb as _,vb as i,wb as b,xb as y}from"./chunk-Q52YNUQE.js";var ae=()=>["form"],re=a=>["/sampling",a];function oe(a,r){if(a&1){let n=V();t(0,"tr")(1,"th",13),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td")(12,"div",14)(13,"a",15),i(14,"Ver"),e(),t(15,"button",16),A("click",function(){let h=D(n).$implicit,l=_();return L(l.redirect(h._id))}),i(16,"Editar"),e()()()()}if(a&2){let n=r.$implicit,o=r.index;m(2),b(o+1),m(2),b(n.muestra),m(2),b(n.fecha),m(2),b(n.jornada),m(2),b(n.descripcon),m(3),x("routerLink",G(6,re,n._id))}}var te=(()=>{var r,n,o,h;let l=class l{constructor(){p(this,r,void 0);p(this,n,void 0);p(this,o,void 0);p(this,h,void 0);S(this,r,u(M)),S(this,n,u(F)),S(this,o,u(Z)),S(this,h,u(T)),this.listSampling=[]}ngOnInit(){let g=sessionStorage.getItem("_id");d(this,r).getSampling(g).subscribe(v=>{v.ok&&(this.listSampling=v.data)})}redirect(g=""){let f={queryParams:{id:g}};d(this,n).navigate(["sampling/form"],f)}exportTable(){d(this,o).exportTableToExcel("excel-table","table_data")}};r=new WeakMap,n=new WeakMap,o=new WeakMap,h=new WeakMap,l.\u0275fac=function(v){return new(v||l)},l.\u0275cmp=C({type:l,selectors:[["app-sampling-list"]],standalone:!0,features:[I],decls:29,vars:3,consts:[[1,"container-fluid"],[1,"row","justify-content-center"],[1,"col-12","col-lg-12"],[1,"w-100","d-lg-flex","justify-content-between","align-items-center","flex-nowrap"],[1,"text-center","my-5"],[1,"d-flex"],[1,"btn","btn-outline-success","me-2",3,"routerLink"],[1,"btn","btn-outline-info",3,"click"],[1,"table-responsive"],["id","excel-table",1,"table"],["scope","col"],["scope","col",1,"w-25"],[4,"ngFor","ngForOf"],["scope","row"],[1,"d-grid","gap-2","d-md-block"],["routerLinkActive","router-link-active",1,"btn","btn-outline-info","me-1",3,"routerLink"],["type","button",1,"btn","btn-outline-warning",3,"click"]],template:function(v,f){v&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),i(5,"Listado de muestras"),e(),t(6,"div",5)(7,"a",6),i(8,"Crear Muestra"),e(),t(9,"button",7),A("click",function(){return f.exportTable()}),i(10,"Exportar a Excel"),e()()(),t(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th",10),i(16,"#"),e(),t(17,"th",10),i(18,"muestra"),e(),t(19,"th",10),i(20,"fecha"),e(),t(21,"th",11),i(22,"Jornada"),e(),t(23,"th",11),i(24,"Descripci\xF3n"),e(),t(25,"th",10),i(26,"Acciones"),e()()(),t(27,"tbody"),E(28,oe,17,8,"tr",12),e()()()()()()),v&2&&(m(7),x("routerLink",R(2,ae)),m(21),x("ngForOf",f.listSampling))},dependencies:[O,z],encapsulation:2});let a=l;return a})();function le(a,r){if(a&1&&(t(0,"p",9)(1,"strong"),i(2,"Descripci\xF3n: "),e(),i(3),e()),a&2){let n=_(2);m(3),b(n.samplig.descripcon)}}function me(a,r){if(a&1&&(t(0,"div",2)(1,"div",3)(2,"h5",4),i(3),e(),t(4,"h6",5),i(5),e(),t(6,"ul",6)(7,"li",7),i(8),e(),t(9,"li",7),i(10),e()(),E(11,le,4,1,"p",8),e()()),a&2){let n=_();m(3),y("Muestra tomada ",n.samplig.fecha,""),m(2),y("Glucometria: ",n.samplig.muestra,""),m(3),y("Hora: ",n.samplig.hora,""),m(2),y("Jornada: ",n.samplig.jornada,""),m(),x("ngIf",n.samplig.descripcon)}}var ie=(()=>{var r,n;let o=class o{constructor(){p(this,r,u(M));p(this,n,u(k))}ngOnInit(){d(this,n).paramMap.subscribe(l=>{let c=l.get("id");c&&this.getMuestra(c)})}getMuestra(l){d(this,r).getSamplingById(l).subscribe(c=>{console.log(c),this.samplig=c.data})}};r=new WeakMap,n=new WeakMap,o.\u0275fac=function(c){return new(c||o)},o.\u0275cmp=C({type:o,selectors:[["app-sampling-detail"]],standalone:!0,features:[I],decls:2,vars:1,consts:[[1,"d-flex","justify-content-center","align-items-center",2,"height","92vh"],["class","card","style","width: 25rem;",4,"ngIf"],[1,"card",2,"width","25rem"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"list-group"],[1,"list-group-item"],["class","card-text",4,"ngIf"],[1,"card-text"]],template:function(c,g){c&1&&(t(0,"div",0),E(1,me,12,5,"div",1),e()),c&2&&(m(),x("ngIf",g.samplig))},dependencies:[j],encapsulation:2});let a=o;return a})();function se(a,r){if(a&1&&(t(0,"strong"),i(1),e()),a&2){let n=_();m(),y("seleccionada ",n.formSampling.getRawValue().jornada," ")}}var ne=(()=>{var r,n,o,h,l,c;let g=class g{constructor(){p(this,r,void 0);p(this,n,void 0);p(this,o,void 0);p(this,h,void 0);p(this,l,void 0);p(this,c,void 0);S(this,r,u(M)),S(this,n,u(X)),S(this,o,u(k)),S(this,h,u(F)),S(this,l,u(J)),S(this,c,u(T)),this.edit=!1,this.formSampling=d(this,n).nonNullable.group({muestra:[],fecha:[""],hora:[""],descripcon:[""],jornada:[""],user:[""],_id:[""]})}ngOnInit(){this.user=d(this,c).currentUserExists(),this.formSampling.patchValue({user:this.user.id}),d(this,o).queryParams.subscribe(f=>{let s=f.id;s&&(this.edit=!0,this.getMuestra(s))})}send(){console.log(this.formSampling.getRawValue()),this.formSampling.markAllAsTouched(),!this.formSampling.invalid&&(this.edit?this.editMuestra(this.formSampling.getRawValue()):this.createMuestra(this.formSampling.getRawValue()))}getMuestra(f){d(this,r).getSamplingById(f).subscribe(s=>{this.formSampling.patchValue({_id:s.data._id,muestra:s.data.muestra,descripcon:s.data.descripcon,fecha:s.data.fecha,hora:s.data.hora,jornada:s.data.jornada||"",user:this.user.id})})}createMuestra(f){d(this,r).postSamplin(f).subscribe(s=>{d(this,l).dispatchToast({message:`${s.mensaje}`,dispose:"Aceptar"}),d(this,h).navigate(["sampling",s.data._id])})}editMuestra(f){d(this,r).putSampling(f).subscribe(s=>{d(this,l).dispatchToast({message:`${s.mensaje}`,dispose:"Aceptar"}),d(this,h).navigate(["sampling"])})}};r=new WeakMap,n=new WeakMap,o=new WeakMap,h=new WeakMap,l=new WeakMap,c=new WeakMap,g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=C({type:g,selectors:[["app-sampling-create"]],standalone:!0,features:[I],decls:43,vars:2,consts:[[1,"container-fluid",2,"height","96vh"],[1,"row","justify-content-center"],[1,"col-6"],[1,"text-center","my-5"],[1,"my-5",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","muestra","placeholder","Ej: 30",1,"form-control"],["type","string","formControlName","fecha",1,"form-control"],["type","time","formControlName","hora",1,"form-control"],["name","descripcon","id","descripcon","formControlName","descripcon",1,"form-control"],[4,"ngIf"],["name","jornada","id","jornada","formControlName","jornada",1,"form-control"],["value",""],["value","Ayunas"],["value","Antes de Almuerzo"],["value","2 horas despues de almuerzo"],["value","Antes de cenar"],["value","2 horas despues de cenar"],["value","3 AM"],["type","submit",1,"btn","btn-outline-success"]],template:function(s,N){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),i(4,"Toma de muestra diaria"),e(),t(5,"form",4),A("ngSubmit",function(){return N.send()}),t(6,"div",5)(7,"label",6),i(8," Glucometria"),e(),w(9,"input",7),e(),t(10,"div",5)(11,"label",6),i(12," Fecha"),e(),w(13,"input",8),e(),t(14,"div",5)(15,"label",6),i(16," Hora"),e(),w(17,"input",9),e(),t(18,"div",5)(19,"label",6),i(20," Description"),e(),w(21,"textarea",10),e(),t(22,"div",5)(23,"label",6),i(24," Jornada "),E(25,se,2,1,"strong",11),e(),t(26,"select",12)(27,"option",13),i(28,"Seleccione Jornada"),e(),t(29,"option",14),i(30,"Ayunas"),e(),t(31,"option",15),i(32,"Antes de Almuerzo"),e(),t(33,"option",16),i(34,"2 horas despues de almuerzo"),e(),t(35,"option",17),i(36,"Antes de cenar"),e(),t(37,"option",18),i(38,"2 horas despues de cenar"),e(),t(39,"option",19),i(40,"3 AM"),e()()(),t(41,"button",20),i(42,"Guardar"),e()()()()()),s&2&&(m(5),x("formGroup",N.formSampling),m(20),x("ngIf",N.edit))},dependencies:[Y,P,Q,W,$,K,q,B,H,U,j],encapsulation:2});let a=g;return a})();var de=[{path:"",title:"Muestras",data:{title:"Listado de muestras",background:"bg-warning"},loadComponent:()=>te},{path:"form",data:{title:"Creaci\xF3n Muestra",background:"bg-warning"},loadComponent:()=>ne},{path:":id",data:{title:"Detalle de Muestra",background:"bg-warning"},loadComponent:()=>ie}],$e=de;export{$e as default};
